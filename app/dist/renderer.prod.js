(()=>{var e={639:(e,t,n)=>{"use strict";n.r(t);var r=n(297),o=n.n(r);const a=require("react-dom");var s=n(209);const l=require("react-i18next"),c=require("i18next");var u=n.n(c);const d={en:{translation:{username:"Username",password:"Password",remember_password:"Remember my password",sign_in:"Login",add_store:"Select your store",register_terminal:"Register Device",store_dropdown_placeholder:"select your store",reopen_pos:"Open POS",signing_out:"Logout",refresh_settings:"Refresh Settings",open_dashboard:"Open Dashboard"}},nl:{translation:{username:"Gebruikersnaam",password:"Wachtwoord",remember_password:"Onthoud mijn wachtwoord",sign_in:"Inloggen",add_store:"Winkel selecteren",register_terminal:"Registreer Terminal",store_dropdown_placeholder:"Selecteer uw winkel",reopen_pos:"Openen Kassa",signing_out:"Uitloggen",refresh_settings:"Instellingen vernieuwen",open_dashboard:"Openen Dashboard"}}};u().use(l.initReactI18next).init({resources:d,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});const p=u();var f=n(933);const h=require("react-redux");var g=n(697),m=n.n(g);const y=require("react-router");var v=n(559),S=n.n(v),b="@@router/LOCATION_CHANGE",w="@@router/CALL_HISTORY_METHOD",_=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{type:w,payload:{method:e,args:n}}}};_("push"),_("replace"),_("go"),_("goBack"),_("goForward");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const C=function(e){var t=e.getIn,n=e.toJS,r=function(e){var r,o=n(t(e,["router"]));if(null==(r=o)||"object"!==x(r)||!t(r,["location"])||!t(r,["action"]))throw'Could not find router reducer in state tree, it must be mounted under "router"';return o},o=function(e){return n(t(r(e),["location"]))};return{getLocation:o,getAction:function(e){return n(t(r(e),["action"]))},getRouter:r,getSearch:function(e){return n(t(r(e),["location","search"]))},getHash:function(e){return n(t(r(e),["location","hash"]))},createMatchSelector:function(e){var t=null,n=null;return function(r){var i=(o(r)||{}).pathname;if(i===t)return n;t=i;var a=(0,y.matchPath)(i,e);return a&&n&&a.url===n.url&&a.isExact===n.isExact||(n=a),n}}}};function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){if(e&&e.query)return e;var t=e&&e.search;if("string"!=typeof t||0===t.length)return A({},e,{query:{}});var n=t.substring(1).split("&").reduce((function(e,t){var n=T(t.split("="),2);return A({},e,D({},n[0],n[1]))}),{});return A({},e,{query:n})};const N=function(e){var t=e.fromJS,n=e.merge;return function(e){var r=t({location:j(e.location),action:e.action});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.type,a=o.payload;if(i===b){var s=a.location,l=a.action,c=a.isFirstRendering;return c?e:n(e,{location:t(j(s)),action:l})}return e}}};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z={fromJS:function(e){return e},getIn:function(e,t){if(!e)return e;var n=t.length;if(n){for(var r=e,o=0;o<n&&r;++o)r=r[t[o]];return r}},merge:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)},toJS:function(e){return e}};var J,U=function(e){var t=C(e).getLocation,n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(l,e);var n,r,i,a,s=(n=l,function(){var e,t=P(n);if(F()){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return k(this,e)});function l(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=s.call(this,e);var r=e.store,o=e.history,i=e.onLocationChanged,a=e.stateCompareFunction;n.inTimeTravelling=!1,n.unsubscribe=r.subscribe((function(){var i=!e.noTimeTravelDebugging,s=t(r.getState()),l=s.pathname,c=s.search,u=s.hash,d=s.state,p=o.location,f=p.pathname,h=p.search,g=p.hash,m=p.state;!i||"PUSH"!==e.history.action||f===l&&h===c&&g===u&&S()(d,m,a)||(n.inTimeTravelling=!0,o.push({pathname:l,search:c,hash:u,state:d}))}));var c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.inTimeTravelling?n.inTimeTravelling=!1:i(e,t,r)};return n.unlisten=o.listen(c),e.noInitialPop||c(o.location,o.action,!0),n}return r=l,(i=[{key:"componentWillUnmount",value:function(){this.unlisten(),this.unsubscribe()}},{key:"render",value:function(){var e=this.props,t=e.omitRouter,n=e.history,r=e.children;return t?o().createElement(o().Fragment,null,r):o().createElement(y.Router,{history:n},r)}}])&&E(r.prototype,i),a&&E(r,a),l}(r.PureComponent);n.propTypes={store:m().shape({getState:m().func.isRequired,subscribe:m().func.isRequired}).isRequired,history:m().shape({action:m().string.isRequired,listen:m().func.isRequired,location:m().object.isRequired,push:m().func.isRequired}).isRequired,basename:m().string,children:m().oneOfType([m().func,m().node]),onLocationChanged:m().func.isRequired,noInitialPop:m().bool,noTimeTravelDebugging:m().bool,stateCompareFunction:m().func,omitRouter:m().bool};var i=function(e){var t=e.context||h.ReactReduxContext;if(null==t)throw"Please upgrade to react-redux v6";return o().createElement(t.Consumer,null,(function(t){var r=t.store;return o().createElement(n,O({store:r},e))}))};return i.propTypes={context:m().object},(0,h.connect)(null,(function(e){return{onLocationChanged:function(t,n,r){return e(function(e,t){return{type:b,payload:{location:e,action:t,isFirstRendering:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}}(t,n,r))}}}))(i)}(z),W=N(z),q=C(z);q.getLocation,q.getAction,q.getHash,q.getRouter,q.getSearch,q.createMatchSelector;function H(e,t,n,r){J||(J="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:J,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}class V extends r.Component{render(){return H("div",{},void 0,this.props.children)}}const G=require("node-machine-id"),Y="login__loginError__CcToz",X="login__wait__3QuCU",Q=require("@countr/sdk");var K=n.n(Q);const Z="text",ee="image",te="https://res.cloudinary.com/countr-prod/image/upload/v1466436772/logo-horizontal.png",ne="ct",re="lt",oe="NORMAL",ie="B",ae="A",se="B",le="*** PROVISIONAL ***",ce={ORDER:"print-order",BILL:"print-bill",RECEIPT:"print-receipt",REPORT:"print-report",TEST:"print-test"},ue=n(126),de=n(663),pe=(e,t,n,r)=>{const{currency:o}=n,i=t.paper_size?t.paper_size:48,a=n.header.find((e=>e.type===ee&&""!==e.content)),s=a?a.content:te;de.setPaperSize(i),de.connectPrinter(t.device,t.isUSB).then((t=>{ue.Image.load(s,(e=>{n.header.forEach((n=>{if(n.type===ee)t.align(ne),t.image(e,"d24");else if(n.type===Z&&""!==n.content){const e=de.getStyleAlign(n),r=de.getStyleSize(n),o=de.getStyleStyle(n);de.printLine(t,n.content,e,r.width,r.height,o,ae)}})),de.underlineBoldFeed(t),de.lineFeed(t);const r=new Date,i=de.returnFormatedDate(r);if(de.printLine(t,i,ne,1,1,ie,se),de.underlineBoldFeed(t),de.lineFeed(t),n.items.forEach((e=>{const r=e.soldsold_by_weight?"gr":" x",i=`${e.amount}${r} ${e.name}`,a=`${o} ${de.returnItemTotalPrice(e)}`;de.printSpacesBetweenTexts(t,i,a,ie,ae),e.current_variant&&e.current_variant.name&&"Default"!==e.current_variant.name&&de.printLine(t,`   ${e.current_variant.name}`,re,1,1,oe,se);const s=`   @ ${o} ${parseFloat(de.returnItemBasePrice(e)-e.deposit).toFixed(2)}`;de.printLine(t,s,re,1,1,oe,se);const{addons:l}=e;if(l&&l.length&&l.forEach((e=>{const n=`   + ${e.amount} x ${e.name} (${o} ${parseFloat(e.price).toFixed(2)})`;de.printLine(t,n,re,1,1,oe,se)})),e.deposit&&e.deposit>0){const r=`   + ${n.langs.deposit}: ${o} ${parseFloat(e.deposit).toFixed(2)}`;de.printLine(t,r,re,1,1,oe,se)}if(e.note&&e.note.length){const n=`   *** ${e.note} ***`;de.printLine(t,n,re,1,1,oe,se)}if(n.printEAN&&e.ean&&e.ean.length){const n=`   EAN: ${e.ean}`;de.printLine(t,n,re,1,1,oe,se)}if(e.discount&&e.discount>0){const r=`   ${n.langs.discount} ${(100*e.discount).toFixed(2)}%`,i=`-${o} ${parseFloat(de.returnItemTotalPrice(e)*e.discount).toFixed(2)}`;de.printSpacesBetweenTexts(t,r,i,oe,se)}e.description&&de.printLine(t,e.description,re,1,1,oe,se)})),de.underlineBoldFeed(t),de.lineFeed(t),n.total.discount&&0!==n.total.discount){const e=`${n.langs.discount} ${(100*n.total.discount).toFixed(2)}%`,r=`-${o} ${Number(n.total.total*(n.total.discount/(1-n.total.discount))).toFixed(2)}`;de.printSpacesBetweenTexts(t,e,r,oe,ae)}n.deliveryCost&&de.printSpacesBetweenTexts(t,n.langs.deli,`${o} ${parseFloat(n.deliveryCost).toFixed(2)}`,oe,ae),de.printSpacesBetweenTexts(t,n.langs.subtotal,`${o} ${parseFloat(n.total.sub_total).toFixed(2)}`,oe,ae);const a=n.total.taxes.reduce(((e,t)=>e+t.amount),0);de.printSpacesBetweenTexts(t,n.langs.tax,`${o} ${parseFloat(a).toFixed(2)}`,oe,ae),n.transactionFee&&de.printSpacesBetweenTexts(t,n.langs.transactionFee,`${o} ${parseFloat(n.transactionFee).toFixed(2)}`,oe,ae),de.printSpacesBetweenTexts(t,n.langs.total,`${o} ${parseFloat(n.total.total).toFixed(2)}`,ie,ae),de.lineFeed(t);let s=0,l=0,c=0;const u=[n.langs.tax_rate||"BTW %",n.langs.net||"Netto",n.langs.tax,n.langs.total],d=n.total.taxes.map((e=>{const t=e.name.split(" - ")[1];return s+=e.above,l+=e.amount,c+=e.above+e.amount,[t,`${o} ${e.above.toFixed(2)}`,`${o} ${e.amount.toFixed(2)}`,`${o} ${(e.above+e.amount).toFixed(2)}`]})),p=[n.langs.total,`${o} ${s.toFixed(2)}`,`${o} ${l.toFixed(2)}`,`${o} ${c.toFixed(2)}`];de.printTable(t,4,u,d,p),de.underlineBoldFeed(t),de.lineFeed(t),n.delivery&&(de.printLine(t,n.langs.delivery_details,ne,1,1,ie,ae),de.lineFeed(t),Object.keys(n.delivery).forEach(((e,r)=>{const i=de.revemoFromString(n.delivery[e],"€",`${o} `);de.printSpacesBetweenTexts(t,n.langs.delivery[r],i,oe,ae)})),de.underlineBoldFeed(t),de.lineFeed(t)),n.footer.forEach((n=>{if(n.type===ee)t.align(ne),t.image(e,"d24");else if(n.type===Z&&""!==n.content){const e=de.getStyleAlign(n),r=de.getStyleSize(n),o=de.getStyleStyle(n);de.printLine(t,n.content,e,r.width,r.height,o,ae)}})),n.footer.length&&(de.underlineBoldFeed(t),de.lineFeed(t)),de.printLine(t,le,ne,2,2,ie,ae),de.finishReceipt(t)}));const r=JSON.stringify({event:ce.BILL,success:!0});e.send(r)}),(t=>{r(t.stack,`### Print Bill: ${t.message}`);const n=JSON.stringify({event:ce.BILL,success:!1,error:t.message});e.send(n)}))},fe=n(663),he=n(663),ge=n(663),me=n(663),ye=(e,t,n,r)=>{if("object"==typeof t){let e=t;(t=[]).push(e),e=null}const o=[];t.forEach((i=>{if(i.printSpecificCategories){const e=i.categories;if(n.items.forEach((t=>{t.categories.forEach((n=>{e.toString().includes(n)&&o.push(t)}))})),!o.length)return}me.connectPrinter(i.device,i.isUSB).then((r=>{const i=t.paper_size?t.paper_size:48;n.splitItems||n.splitAmount?n.splitItems&&!n.splitAmount?((e,t,n)=>{he.setPaperSize(48);const r=new Date;(n.length?n:t.items).reverse().forEach((n=>{he.printLine(e,`ORDER: ${t.table}`,"ct",2,2,"b","A"),he.lineFeed(e);const o=`Receipt: #${t.receipt_id}`,i=he.returnFieldFormatedDate("Date",r);he.printLine(e,o,"lt",1,1,"normal","A"),he.printLine(e,i,"lt",1,1,"normal","A"),he.underlineFeed(e),he.lineFeed(e);const a=`${t.reprint?"[[!REPRINT]] ":""}${n.amount} x ${he.returnItemName(n)}`;he.printLine(e,a,"lt",2,1,"b","A");const{addons:s}=n;if(s&&s.length&&s.forEach((t=>{const n=`  + ${t.amount} x ${t.name}`;he.printLine(e,n,"lt",2,1,"normal","A")})),n.note&&n.note.length){const t=`*** ${n.note} ***`;he.printLine(e,t,"lt",2,1,"normal","A")}he.underlineFeed(e),he.lineFeed(e),he.cutReceipt(e)})),e.close()})(r,n,o):!n.splitItems&&n.splitAmount&&((e,t,n,r)=>{ge.setPaperSize(r);const o=new Date;(n.length?n:t.items).reverse().forEach((n=>{let r=1;for(;r<=n.amount;){ge.printLine(e,`ORDER: ${t.table}`,"ct",2,2,"b","A"),ge.lineFeed(e);const i=`Receipt: #${t.receipt_id}`,a=ge.returnFieldFormatedDate("Date",o);ge.printLine(e,i,"lt",1,1,"normal","A"),ge.printLine(e,a,"lt",1,1,"normal","A"),ge.underlineFeed(e),ge.lineFeed(e);const s=`${t.reprint?"[[!REPRINT]] ":""}1 x ${ge.returnItemName(n)}`;ge.printLine(e,s,"lt",2,1,"b","A");const{addons:l}=n;if(l&&l.length&&l.forEach((t=>{const n=`  + ${t.amount} x ${t.name}`;ge.printLine(e,n,"lt",2,1,"normal","A")})),n.note&&n.note.length){const t=`*** ${n.note} ***`;ge.printLine(e,t,"lt",2,1,"normal","A")}ge.underlineFeed(e),ge.lineFeed(e),ge.cutReceipt(e),r+=1}})),e.close()})(r,n,o,i):((e,t,n,r)=>{fe.setPaperSize(r),fe.printLine(e,`ORDER: ${t.table}`,"ct",2,2,"b","A"),fe.lineFeed(e);const o=`Receipt: #${t.receipt_id}`,i=fe.returnFieldFormatedDate("Date",new Date);fe.printLine(e,o,"lt",1,1,"normal","A"),fe.printLine(e,i,"lt",1,1,"normal","A"),t.delivery&&t.delivery&&""!=t.delivery.note&&fe.printLine(e,`*** ${t.delivery.note} ***`,"lt",1,1,"normal","A"),fe.underlineFeed(e),fe.lineFeed(e),(n.length?n.reverse():t.items.reverse()).forEach((n=>{const r=`${t.reprint?"[[!REPRINT]] ":""}${n.amount} x ${fe.returnItemName(n)}`;fe.printLine(e,r,"lt",2,1,"b","A");const{addons:o}=n;if(o&&o.length&&o.forEach((t=>{const n=`  + ${t.amount} x ${t.name}`;fe.printLine(e,n,"lt",2,1,"normal","A")})),n.note&&n.note.length){const t=`*** ${n.note} ***`;fe.printLine(e,t,"lt",2,1,"normal","A")}})),fe.underlineFeed(e),fe.lineFeed(e),t.delivery&&t.delivery.langs&&t.delivery.print&&(fe.printLine(e,t.delivery.langs.delivery_details,ne,1,1,ie,ae),fe.lineFeed(e),Object.keys(t.delivery.print).forEach(((n,r)=>{const o=fe.revemoFromString(t.delivery.print[n],"€",`${t.delivery.currency} `);fe.printSpacesBetweenTexts(e,t.delivery.langs.delivery[r],o,oe,ae)})),fe.underlineBoldFeed(e),fe.lineFeed(e),t.delivery.toPay&&(fe.printLine(e,"*** TO PAY ***",ne,2,2,ie,ae),fe.lineFeed(e))),fe.finishReceipt(e)})(r,n,o,i);const a=JSON.stringify({event:ce.ORDER,success:!0});e.send(a)}),(t=>{r(t.stack,`### Print Order: ${t.message}`);const n=JSON.stringify({event:ce.ORDER,success:!1,error:t.message});e.send(n)}))}))},ve=n(126),Se=n(663),be=(e,t,n,r)=>{const{currency:o}=n,i=t.paper_size?t.paper_size:48,a=n.header.find((e=>e.type===ee&&""!==e.content)),s=a?a.content:te;Se.setPaperSize(i),Se.connectPrinter(t.device,t.isUSB).then((t=>{ve.Image.load(s,(async r=>{n.header.forEach((e=>{if(e.type===ee)t.align(ne),t.image(r,"d24");else if(e.type===Z&&""!==e.content){const n=Se.getStyleAlign(e),r=Se.getStyleSize(e),o=Se.getStyleStyle(e);Se.printLine(t,e.content,n,r.width,r.height,o,ae)}})),Se.underlineBoldFeed(t),Se.lineFeed(t);const i=Se.returnFormatedDate(n.date),a=`${n.langs.receipt}: #${n.number}`;let s=n.customer&&n.customer.name&&n.customer.email?`${n.customer.name} (${n.customer.email})`:null;if(Se.printLine(t,i,ne,1,1,ie,se),Se.printLine(t,a,ne,1,1,ie,se),n.employee&&""!==n.employee&&Se.printSpacesBetweenTexts(t,n.langs.employee,n.employee,oe,se),s&&(s=s.indexOf("\n")>=0?s.split(" ").join("").replace(/(\r\n|\n|\r)/gm," "):s,Se.printSpacesBetweenTexts(t,n.langs.customer,s,oe,se)),Se.underlineBoldFeed(t),Se.lineFeed(t),n.items.forEach((e=>{const r=e.soldsold_by_weight?"gr":" x",i=`${e.amount}${r} ${e.name}`,a=`${o} ${Se.returnItemTotalPrice(e)}`;Se.printSpacesBetweenTexts(t,i,a,ie,ae),e.current_variant&&e.current_variant.name&&"Default"!==e.current_variant.name&&Se.printLine(t,`   ${e.current_variant.name}`,re,1,1,oe,se);const s=e.deposit?e.deposit:0,l=`   @ ${o} ${parseFloat(Se.returnItemBasePrice(e)-s).toFixed(2)}${e.soldsold_by_weight?"/gr":""}`;Se.printLine(t,l,re,1,1,oe,se);const{addons:c}=e;if(c&&c.length&&c.forEach((e=>{const n=`   + ${e.amount} x ${e.name} (${o} ${parseFloat(e.price).toFixed(2)})`;Se.printLine(t,n,re,1,1,oe,se)})),e.deposit&&e.deposit>0){const r=`   + ${n.langs.deposit}: ${o} ${parseFloat(e.deposit).toFixed(2)}`;Se.printLine(t,r,re,1,1,oe,se)}if(e.note&&e.note.length){const n=`   *** ${e.note} ***`;Se.printLine(t,n,re,1,1,oe,se)}if(n.printEAN&&e.ean&&e.ean.length){const n=`   EAN: ${e.ean}`;Se.printLine(t,n,re,1,1,oe,se)}if(e.discount&&e.discount>0){const r=`   ${n.langs.discount} ${(100*e.discount).toFixed(2)}%`,i=`-${o} ${parseFloat(Se.returnItemTotalPrice(e)*e.discount).toFixed(2)}`;Se.printSpacesBetweenTexts(t,r,i,oe,se)}e.description&&Se.printLine(t,e.description,re,1,1,oe,se)})),Se.underlineBoldFeed(t),Se.lineFeed(t),n.total.discount&&0!==n.total.discount){const e=`${n.langs.discount} ${(100*n.total.discount).toFixed(2)}%`,r=`-${o} ${Number(n.total.total*(n.total.discount/(1-n.total.discount))).toFixed(2)}`;Se.printSpacesBetweenTexts(t,e,r,oe,ae)}n.deliveryCost&&Se.printSpacesBetweenTexts(t,n.langs.deli,`${o} ${parseFloat(n.deliveryCost).toFixed(2)}`,oe,ae),Se.printSpacesBetweenTexts(t,n.langs.subtotal,`${o} ${parseFloat(n.total.sub_total).toFixed(2)}`,oe,ae);const l=n.total.taxes.reduce(((e,t)=>e+t.amount),0);Se.printSpacesBetweenTexts(t,n.langs.tax,`${o} ${parseFloat(l).toFixed(2)}`,oe,ae),n.transactionFee&&Se.printSpacesBetweenTexts(t,n.langs.transactionFee,`${o} ${parseFloat(n.transactionFee).toFixed(2)}`,oe,ae),Se.printSpacesBetweenTexts(t,n.langs.total,`${o} ${parseFloat(n.total.total).toFixed(2)}`,ie,ae),Se.lineFeed(t),n.total.paid.forEach((e=>{const r=`${n.langs.paid} (${e.type})`,i=`${o} ${parseFloat(e.value).toFixed(2)}`;Se.printSpacesBetweenTexts(t,r,i,oe,ae)})),Se.printSpacesBetweenTexts(t,n.langs.change,`${o} ${parseFloat(n.total.change).toFixed(2)}`,oe,ae),Se.lineFeed(t),n.is_partial&&n.total.remaining_payment&&n.total.remaining_payment>=0&&(Se.printSpacesBetweenTexts(t,n.langs.remaining_payment,`${o} ${parseFloat(n.total.remaining_payment).toFixed(2)}`,ie,ae),Se.lineFeed(t));let c=0,u=0,d=0;const p=[n.langs.tax_rate||"BTW %",n.langs.net||"Netto",n.langs.tax,n.langs.total],f=n.total.taxes.map((e=>{const t=e.name.split(" - ")[1];return c+=e.above,u+=e.amount,d+=e.above+e.amount,[t,`${o} ${e.above.toFixed(2)}`,`${o} ${e.amount.toFixed(2)}`,`${o} ${(e.above+e.amount).toFixed(2)}`]})),h=[n.langs.total,`${o} ${c.toFixed(2)}`,`${o} ${u.toFixed(2)}`,`${o} ${d.toFixed(2)}`];Se.printTable(t,4,p,f,h),Se.underlineBoldFeed(t),Se.lineFeed(t),n.info&&n.info.length&&(n.info.forEach(((e,r)=>{Se.underlineFeed(t),Se.lineFeed(t),Se.printLine(t,`${n.langs.payment}: ${r+1}`,ne,1,1,oe,ae),Se.underlineFeed(t),Se.lineFeed(t),Se.printLine(t,e,ne,1,1,oe,se)})),Se.underlineBoldFeed(t),Se.lineFeed(t)),n.fiscal_info&&n.fiscal_info.length&&(Se.printLine(t,n.fiscal_info,re,1,1,oe,se),Se.underlineBoldFeed(t),Se.lineFeed(t)),n.delivery&&(Se.printLine(t,n.langs.delivery_details,ne,1,1,ie,ae),Se.lineFeed(t),Object.keys(n.delivery).forEach(((e,r)=>{const i=Se.revemoFromString(n.delivery[e],"€",`${o} `);Se.printSpacesBetweenTexts(t,n.langs.delivery[r],i,oe,ae)})),Se.underlineBoldFeed(t),Se.lineFeed(t)),n.footer.forEach((e=>{if(e.type===ee)t.align(ne),t.image(r,"d24");else if(e.type===Z&&""!==e.content){const n=Se.getStyleAlign(e),r=Se.getStyleSize(e),o=Se.getStyleStyle(e);Se.printLine(t,e.content,n,r.width,r.height,o,ae)}})),n.footer.length&&(Se.underlineBoldFeed(t),Se.lineFeed(t)),n.openCashDrawer&&t.cashdraw(2),n.reprint&&(Se.lineFeed(t),Se.printLine(t,"*** REPRINT ***",ne,2,2,ie,ae),Se.underlineBoldFeed(t)),n.qr?Se.printQRCode(t,n.qr):Se.finishReceipt(t),e.send(JSON.stringify({event:ce.RECEIPT,success:!0,id:n.number}))}))}),(t=>{r(t.stack,`### Print Receipt: ${t.message}`);const n=JSON.stringify({event:ce.RECEIPT,success:!1,error:t.message});e.send(n)}))},we=n(663),_e=(e,t,n)=>{if("object"==typeof t){let e=t;(t=[]).push(e),e=null}t.forEach((t=>{we.connectPrinter(t.device,t.isUSB).then((n=>{n.align("ct").font("A").style("b").size(2,3).text("PRINT TEST"),n.size(1).font("A").style("normal").size(1,1).text(t.isUSB?"USB PRINTER":t.device),n.size(1).text(" ".repeat(34)),n.size(1).text(" ".repeat(34)),n.size(1).text(" ".repeat(34)).cut().flush().close();const r=JSON.stringify({event:ce.TEST,success:!0});e.send(r)}),(t=>{n(t.stack,`### Print Test: ${t.message}`);const r=JSON.stringify({event:ce.TEST,success:!1,error:t.message});e.send(r)}))}))},xe=n(126),Ce=n(663),$e=String.fromCharCode.apply(null,[29,33,0]),Oe=(String.fromCharCode.apply(null,[29,33,17]),String.fromCharCode.apply(null,[29,33,34]),String.fromCharCode.apply(null,[27,45,0])),Ee=String.fromCharCode.apply(null,[27,45,2]),ke=String.fromCharCode.apply(null,[27,69,0]),Fe=String.fromCharCode.apply(null,[27,69,1]),Pe=(String.fromCharCode.apply(null,[27,52,0]),String.fromCharCode.apply(null,[27,52,1]),String.fromCharCode.apply(null,[27,97,0])),Ie=String.fromCharCode.apply(null,[27,97,1]),Te=(String.fromCharCode.apply(null,[27,97,2]),String.fromCharCode.apply(null,[10])),Re=(String.fromCharCode.apply(null,[27,64]),String.fromCharCode.apply(null,[27,116,15]),String.fromCharCode.apply(null,[27,33,0])),Le=String.fromCharCode.apply(null,[27,33,1]),Ae=(String.fromCharCode.apply(null,[16,4,1]),String.fromCharCode.apply(null,[16,4,2]),String.fromCharCode.apply(null,[16,4,3]),String.fromCharCode.apply(null,[16,4,4]),String.fromCharCode.apply(null,[16,4,17]),String.fromCharCode.apply(null,[16,4,20]),String.fromCharCode.apply(null,[29,40,107,4,0,49,65,50,0]),String.fromCharCode.apply(null,[29,40,107,3,0,49,67,9]),String.fromCharCode.apply(null,[29,40,107,3,0,49,68,48]),String.fromCharCode.apply(null,[29,40,107]),String.fromCharCode.apply(null,[49,80,48]),String.fromCharCode.apply(null,[29,40,107,3,0,49,81,48]),String.fromCharCode.apply(null,[29,40,107,3,0,49,82,48]),()=>{let e=42,t="EUR";return{printReport(n,r,o,i){e=56,t=o.currency||"EUR",Ce.connectPrinter(r.device,r.isUSB).then((e=>{const t=this.generateReportCommands(o);e.size(1).pureText(t).flush((()=>{console.log("flush in report")})).cut().close();const r=JSON.stringify({event:ce.REPORT,success:!0});n.send(r)}),(e=>{i(e.stack,`### Print Report: ${e.message}`);const t=JSON.stringify({event:ce.REPORT,success:!1,error:e.message});n.send(t)}))},spacesBetween(t,n){let r="";return r=t.length+n.length<=e?t+" ".repeat(e-(t.length+n.length))+n:`${t} ${n}`,r},addHorizontalLine(){let t="";for(i=0;i<e;i++)t+=" ";return Ie+Oe+t+Te},getReportType:e=>1===e?"Day":e>1&&e<=7?"Week":"Month",returnMaxCellStrint(t,n){const r=Math.floor(e/n);return t.length<=r?t+" ".repeat(r-t.length):t.substring(0,r)},generateReportCommands(e){const n=new Date(e.start_date),r=new Date(e.end_date),o=Math.abs(r.getTime()-n.getTime()),i=Math.ceil(o/864e5),a=e.content[t].tables.transaction_by_method,s=e.content[t].tables.payment_by_method,l=e.content[t].tables.refund_by_method,c=e.content[t].tables.product_by_taxes,u=e.content[t].tables.product_by_category;let d=Re+Ie;return d+=Le,d+=`${Ie+Fe+$e}Report${Te}${n.toLocaleDateString()}${Te}${this.getReportType(i)}${Te}`,d+=this.getTransactions("TRANSACTIONS",a,a.details)+Te,d+=this.getTransactions("PAYMENTS",s,s.details)+Te,d+=this.getTransactions("REFUNDS",l,l.details)+Te,d+=this.getTaxes("TAXES",c,c.details)+Te,d+=this.getCategories(u)+Te,d},getTransactions(e,n,r){const o=e=>!!e.details;let i=Le+Pe+Te;return i+=Fe+Pe+Ee+this.returnMaxCellStrint(e,3)+this.returnMaxCellStrint("AMOUNT",3)+this.returnMaxCellStrint("NUMBER",3)+Oe+ke+Te+Le,Object.keys(r).forEach((e=>{r[e]&&"isTable"!==e&&!o(r[e])?i+=Pe+this.returnMaxCellStrint(e,3)+this.returnMaxCellStrint(`${t} ${r[e].amount.toFixed(2)}`,3)+this.returnMaxCellStrint(`${r[e].number}`,3)+Te:o(r[e])&&Object.keys(r[e].details).forEach((n=>{i+=Pe+this.returnMaxCellStrint(n,3)+this.returnMaxCellStrint(`${t} ${r[e].details[n].amount.toFixed(2)}`,3)+this.returnMaxCellStrint(`${r[e].details[n].number}`,3)+Te}))})),Object.keys(r).length&&(i+=Pe+Fe+this.returnMaxCellStrint("TOTAL",3)+this.returnMaxCellStrint(`${t} ${n.summary.amount.toFixed(2)}`,3)+this.returnMaxCellStrint(`${n.summary.number}`,3)+ke),i},getTaxes(e,n,r){let o=Le+Pe+Te;return o+=Fe+Pe+Ee+this.returnMaxCellStrint(e,4)+this.returnMaxCellStrint("AMOUNT",4)+this.returnMaxCellStrint("PRETAX",4)+this.returnMaxCellStrint("TAXES",4)+Oe+ke+Te+Le,Object.keys(r).forEach((e=>{r[e]&&"isTable"!==e&&(o+=Pe+this.returnMaxCellStrint(e,4)+this.returnMaxCellStrint(`${t} ${r[e].amount.toFixed(2)}`,4)+this.returnMaxCellStrint(`${t} ${r[e].preTax.toFixed(2)}`,4)+this.returnMaxCellStrint(`${t} ${r[e].taxes.toFixed(2)}`,4)+Te)})),o+=Pe+Fe+this.returnMaxCellStrint("TOTAL",4)+this.returnMaxCellStrint(`${t} ${n.summary.amount.toFixed(2)}`,4)+this.returnMaxCellStrint(`${t} ${n.summary.preTax.toFixed(2)}`,4)+this.returnMaxCellStrint(`${t} ${n.summary.taxes.toFixed(2)}`,4)+ke,o},getCategories(e){let n=Le+Pe+Te;return n+=Fe+Pe+Ee+this.returnMaxCellStrint("CATEGORIES",4)+this.returnMaxCellStrint("AMOUNT",4)+this.returnMaxCellStrint("NUMBER",4)+this.returnMaxCellStrint("PRETAX",4)+Oe+ke+Te+Le,Object.keys(e.details).forEach((r=>{e.details[r]&&"isTable"!==r&&r.indexOf("refund")<0?n+=Pe+this.returnMaxCellStrint(`${e.details[r].name}`,4)+this.returnMaxCellStrint(`${t} ${e.details[r].summary.amount.toFixed(2)}`,4)+this.returnMaxCellStrint(`${e.details[r].summary.number}`,4)+this.returnMaxCellStrint(`${t} ${e.details[r].summary.preTax.toFixed(2)}`,4)+Te:e.details[r]&&"isTable"!==r&&r.indexOf("refund")>=0&&(n+=Pe+this.returnMaxCellStrint(`${e.details[r].name} (Refund)`,4)+this.returnMaxCellStrint(`${t} ${e.details[r].summary.amount.toFixed(2)}`,4)+this.returnMaxCellStrint(`${e.details[r].summary.number}`,4)+this.returnMaxCellStrint(`${t} ${e.details[r].summary.preTax.toFixed(2)}`,4)+Te)})),n}}}),De=n(126);class je{constructor(e,t,n,r){this.countr=e,this.ws=t,this.method=n.method,this.extras=n.extras,this.amount=n.amount,this.reference=n.reference,this.currency=n.currency,this.device_id=n.device_id,this.checkoutId=n.checkoutId,this.paymentId=n.paymentId||null,this.paymentProcess={},this.result=null,this.errorLog=r}sendData(e){this.ws.send(JSON.stringify(e))}initPayment(){this.countr.checkPaymentProviderStatus(this.method,this.extras).then((e=>{e.message&&this.sendData({event:"message",payload:e}),e.warning||e.success?e.warning?this.sendData({event:"continueWithPayment",payload:e}):e.success&&this.startPayment():this.sendData({event:"handleResult",payload:e})})).catch((e=>{this.sendData({event:"handleError",payload:e})}))}startPayment(){console.log("### Attempting "+this.method+" payment");const e={reference:this.reference,amount:this.amount,currency:this.currency,device_id:this.device_id,checkoutId:this.checkoutId,...this.extras};e.amount<0&&(e.paymentId=this.paymentId),this.countr.runPayment(this.method,e,(e=>{console.log("PAYMENT STARTED",JSON.stringify(e));const t="transaction_started "+(e||{}).paymentId;this.sendData({event:"paymentStarted",payload:{message:t,extra:e}}),e&&e.paymentId&&(this.paymentProcess.paymentId=e.paymentId)}),(e=>{if(e&&!this.paymentProcess.cancelling)if(console.log("MESSAGE RECEIVED",e),0===e.indexOf("@INSERTED_AMOUNT")){const t=parseFloat(e.replace("@INSERTED_AMOUNT ",""))/100;console.log("### Inserted: "+t),this.sendData({event:"messageReceived",payload:{total_paid_value:t,remaining_value:this.amount/100-t}})}else 0===e.indexOf("@INSERTED_DETAILS")?console.log(e.replace("@INSERTED_DETAILS ","")):this.sendData({event:"messageReceived",payload:{message:e}})})).then((e=>{console.log("##### Finished"),this.handleResult(e)})).catch((e=>{console.log("##### ERROR ON PAY"),this.handleResult(e)}))}handleResult(e){let t=null,n="";if(this.result=e||{},console.log("### RESULT: "+JSON.stringify(e)),e.success)t="success",n="payment_success",this.paymentProcess.success=!0,this.paymentProcess.info=e,console.log("### Closing"),this.sendData({event:"handleResult",payload:e});else if(e.warning)t="success",n=e.message||"payment_success",this.paymentProcess.success=!0,this.paymentProcess.info=e,console.log("### Closing"),this.sendData({event:"handleResult",payload:e});else{t=this.paymentProcess.cancelling?"warning":"error";var r=e.message||(e.response||{}).errorMessage||(e.response||{}).resultCode||(e.response||{}).reason,o=r?": "+r:"";n=this.paymentProcess.cancelling?"transaction_cancelled":"payment_error"+o,console.log("### Display message: "+n.title);const i={info:{returnedData:JSON.stringify(e),provider:this.method,reference:this.reference}};this.errorLog(i,"Payment failed"),this.paymentProcess.cancelled=!0,this.sendData({event:"handleResult",payload:e})}}handleCancel(){this.countr.cancelPayment(this.method,{paymentId:this.paymentProcess.paymentId,...this.extras},(function(e){console.log("CANCEL MESSAGE RECEIVED",JSON.stringify(e)),this.sendData({event:"messageReceived",payload:{message:JSON.stringify(e)}})})).then((e=>{console.log("Finished cancel"),this.paymentProcess.cancelling=!0})).catch((e=>{console.log("ERROR ON CANCEL"),console.log(e.message),this.handleResult(e.message)}))}}n(334).config();const Ne=n(439),Me=n(605),{shell:Be}=n(933);let ze=new Me.createServer;ze.listen(2222);const Je=function(){let e,t,n;function r(){return n}const o=(e,t)=>{let n=localStorage.getItem("user"),r=localStorage.getItem("device");n&&r&&(n=JSON.parse(n),r=JSON.parse(r),Je.logError({message:t,user:n._id,store:r.store,device:r._id,stack:JSON.stringify(e),date:(new Date).toISOString()}))};return{getCountrSdk:()=>(e||(e=async function(){const e=new(K())({opts:{staging:!0,local:!1,enableSocket:!0}});return e.setClient({client_id:"client-f5189179da1eeff475cf9fcd233e155824fd497a",client_secret:"secret-5248dc339a5812d07e1fcee9a7845fc6fd713a5c"}),e.on("refreshed",(async e=>{try{await localStorage.setItem("access_token",e.access_token),await localStorage.setItem("refresh_token",e.refresh_token)}catch(e){console.error(e)}})),e}()),e),logError:async e=>{let t=await Je.getCountrSdk();e.date=(new Date).toISOString(),e.source="desktop";try{t.e.create(e).catch((e=>{console.log(e)}))}catch(e){console.error(e)}},getSocketServer:async()=>(t||(t=await(async()=>new Ne.Server({server:ze}))(),t.on("connection",(e=>{e.on("error",(e=>{o(e,"Desktop socket onerror")})),e.once("close",(t=>{e.removeAllListeners(),e.terminate(),o(t,"Desktop socket onclose")})),e.on("message",(async t=>{const i=JSON.parse(t);if(i&&void 0!==i.type)switch(i.type){case"print":console.log("print");const t=i.ip.printers_saved;for(const n in t)t.hasOwnProperty(n)&&t[n].roles.includes("receipt")&&be(e,t[n],i.payload,o);break;case"print-order":console.log("print-order");const a=i.ip.printers_saved;for(const t in a)a.hasOwnProperty(t)&&a[t].roles.includes("order")&&ye(e,a[t],i.payload,o);break;case"print-bill":console.log("print-bill");const s=i.ip.printers_saved;for(const t in s)s.hasOwnProperty(t)&&s[t].roles.includes("receipt")&&pe(e,s[t],i.payload,o);break;case"print-report":console.log("print-report");const l=i.ip.printers_saved;for(const t in l)l.hasOwnProperty(t)&&l[t].roles.includes("report")&&Ae().printReport(e,l[t],i.payload,o);break;case"print-test":console.log("print-test");const c=i.ip.printers_saved;for(const t in c)c.hasOwnProperty(t)&&_e(e,c[t],o);break;case"screen":(e=>{const t=new xe.Serial(e.port),n=new xe.Screen(t,{encoding:"ISO-8859-1"});t.open((t=>{if(t)throw t;console.log(e),console.log("SCREEN CONNECTED"),n.clear(),n.moveHome(),n.text(e.line1),n.text(e.line2),n.close((()=>{console.log("SCREEN CLOSED")}))}))})(i.payload);break;case"cashdrawer":(e=>{const t={encoding:"ISO-8859-1"};e.ip.printers_saved.forEach((e=>{const n=new De.Network(e.device),r=new De.Printer(n,t);n.open((()=>{console.log("### Manual open cash drawer"),r.cashdraw(2).close()}))}))})(i);break;case"custom-payment":const u=await Je.getCountrSdk(),d=new je(u,e,i.payload,o);!function(e){n=e}(d),d.initPayment();break;case"custom-payment-start":r().startPayment();break;case"custom-payment-cancel":r().handleCancel();break;case"open-dashboard":Be.openExternal(i.payload.url)}}))}))),t)}}();const Ue={logged:!1,remember:!1,merchant:{},updateMerchant(e){Object.keys(e).length&&(this.logged=!0,this.merchant=e)},updateRememberPassword(e){this.remember=e}},We=o().createContext(Ue);var qe,He,Ve,Ge,Ye;function Xe(e,t,n,r){Ge||(Ge="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Ge,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}class Qe extends r.Component{constructor(...e){super(...e),this.state={username:"",password:"",isLoading:!0,error:!1,isInternetConnected:!1,remember:Boolean(localStorage.getItem("desktopRemember")||!1)},this.init=()=>{localStorage.getItem("desktopRemember")&&localStorage.getItem("access_token")&&localStorage.getItem("refresh_token")?Je.getCountrSdk().then((async e=>{e.setToken({access_token:localStorage.getItem("access_token"),refresh_token:localStorage.getItem("refresh_token")});const t=(0,G.machineIdSync)({original:!0}),n=await e.devices.readOne("search/type",{text:"desktop"}).catch((()=>this.setState({isLoading:!1})));if(!n)return void this.setState({isLoading:!1});const r=n.filter((e=>e.uuid===t));return r.length?(localStorage.setItem("localSettings",JSON.stringify(r[0].settings||{})),localStorage.setItem("device",JSON.stringify(r[0])),this.rememberMe(!0)):(localStorage.removeItem("localSettings"),localStorage.removeItem("device"),this.rememberMe(!1)),Je.getCountrSdk().then((e=>(e.me.read().then((e=>(localStorage.setItem("user",JSON.stringify(e)),Ue.updateMerchant(e),this.setState({isLoading:!1}),this.props.history.push("/main")))).catch((()=>this.setState({isLoading:!1}))),e.setToken({access_token:localStorage.getItem("access_token"),refresh_token:localStorage.getItem("refresh_token")})))).catch((()=>this.setState({isLoading:!1}))),n})).catch((()=>{this.setState({isLoading:!1})})):(localStorage.clear(),this.setState({isLoading:!1}))},this.setUsername=e=>{this.setState({username:e.target.value})},this.rememberMe=e=>{Ue.updateRememberPassword(!0),this.setState({remember:e}),localStorage.setItem("desktopRemember",e)},this.setPassword=e=>{this.setState({password:e.target.value})},this.isReady=(e,t)=>new Promise((async(n,r)=>{const o=await Je.getCountrSdk();o.once("registered",(e=>{localStorage.setItem("token_type",e.token_type),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),o.setToken({access_token:e.access_token,refresh_token:e.refresh_token})})),o.register(e,t).then((e=>(localStorage.setItem("user",JSON.stringify(e)),localStorage.getItem("access_token")||o.refresh(),n(e))),(e=>r(e))).catch(console.log)})),this.login=()=>{const e=this,{username:t,password:n}=this.state;this.setState({isLoading:!0}),this.isReady(t,n).then((e=>(localStorage.setItem("user",JSON.stringify(e)),Ue.updateMerchant(e),this.setState({isLoading:!1}),this.props.history.push("/main"))),(t=>{400===t.status&&(this.setState({isLoading:!1,error:!0}),setTimeout((()=>{e.setState({error:!1})}),2e3))})).catch(console.log)}}componentDidMount(){this.submitLogin.addEventListener("keyup",(e=>{e.preventDefault(),13===e.keyCode&&this.login()}));const e=setInterval((()=>{(class{static isInternetConnected(){return navigator.onLine}}).isInternetConnected()&&(clearInterval(e),this.setState({isInternetConnected:!0},(()=>{this.init()})))}),500);JSON.parse(localStorage.getItem("desktopRemember"))||(this.setState({remember:!0}),localStorage.setItem("desktopRemember",!0))}render(){return o().createElement("div",{ref:e=>{this.submitLogin=e}},this.state.isLoading&&(qe||(qe=Xe("div",{className:"load-bar"},void 0,Xe("div",{className:"bar"}),Xe("div",{className:"bar"}),Xe("div",{className:"bar"})))),Xe(We.Consumer,{},void 0,(()=>Xe(l.Translation,{},void 0,(e=>Xe("section",{className:"wrapper"},void 0,He||(He=Xe("img",{className:"logo",src:"'../../img/color_tag_H.png",alt:"Countr Logo"})),Xe("div",{id:"login",className:this.state.error?"shakeElm".concat(" ").concat(`${Y}`):""},void 0,Xe("input",{autoFocus:!0,type:"email",placeholder:e("username"),value:this.state.username,disabled:this.state.isLoading,onChange:this.setUsername,list:"defaultEmails"}),Ve||(Ve=Xe("datalist",{id:"defaultEmails"})),Xe("input",{type:"password",placeholder:e("password"),disabled:this.state.isLoading,value:this.state.password,onChange:this.setPassword}),Xe("label",{htmlFor:"remember-password",id:"remember-password-wrapper"},void 0,e("remember_password"),Xe("input",{name:"remember-password",id:"remember-password",type:"checkbox",checked:this.state.remember,onChange:()=>this.rememberMe(!this.state.remember)})),Xe("button",{onClick:this.login,disabled:!this.state.username.length||!this.state.password.length},void 0,e("login")),!this.state.isInternetConnected&&Xe("div",{className:X},void 0,"Waiting for internet connection..."))))))))}}function Ke(e,t,n,r){Ye||(Ye="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Ye,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}class Ze extends r.Component{render(){return Ke(Qe,{history:this.props.history})}}var et,tt,nt,rt=n(413),ot=n.n(rt),it=n(87),at=n.n(it);function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e,t,n,r){nt||(nt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:nt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const ct=process.env.npm_package_version;class ut extends r.Component{constructor(...e){super(...e),this.state={storesList:{},storeSelected:{},isLoading:!1},this.handlerStoreSelect=e=>t=>{this.setState({[e]:t.target.value})},this.register=()=>{Object.keys(this.state.storeSelected).length&&(this.setState({isLoading:!0}),Je.getCountrSdk().then((async e=>{const t=JSON.parse(localStorage.getItem("localSettings"))||{local_ip:ot().address(),printers_saved:[],paymentProcessorSettings:[]},n=(0,G.machineIdSync)({original:!0}),r=(await e.devices.readOne("search/type",{text:"desktop"})).filter((e=>e.uuid===n));if(r.length)console.info("#####DEVICE FOUND"),localStorage.setItem("localSettings",JSON.stringify(r[0].settings||{})),localStorage.setItem("device",JSON.stringify(r[0])),e.caller.devices.update(r[0]._id,{"info.desktop_version":ct,"settings.local_ip":ot().address()}).then((()=>console.log(`#####DEVICE UPDATED - VERSION - ${ct} - LOCAL IP - ${ot().address()}`))).catch((e=>console.log("#####ERROR UPDATING DEVICE VERSION",e)));else{const r={store:this.state.storeSelected,name:"desktop",uuid:n,merchant:this.props.context.merchant._id,device_type:"desktop",settings:t,info:{os_name:at().platform(),os_type:at().type(),os_version:at().release(),model:at().arch(),desktop_version:ct}};e.caller.devices.create(r).then((e=>(console.info("#####NEW DEVICE CREATED"),localStorage.setItem("device",JSON.stringify(e)),localStorage.setItem("localSettings",JSON.stringify(t)),this.setState({isLoading:!1}),this.props.history.push("/logged")))).catch((e=>{console.info("#####ERROR CREATING NEW DEVICE",e),this.setState({isLoading:!1})}))}return this.setState({isLoading:!1}),this.props.history.push("/logged")})).catch(console.log))}}componentDidMount(){if(this.props.context.logged||this.props.history.push("/"),this.props.context.remember&&localStorage.getItem("device")&&localStorage.getItem("localSettings"))return this.props.history.push("/logged");Je.getCountrSdk().then((e=>e.stores.read().then((e=>this.setState({storesList:e}))).catch(console.info))).catch((e=>{throw new Error(e)}))}render(){const{storesList:e,storeSelected:t,isLoading:n}=this.state;return lt("div",{},void 0,n&&(et||(et=lt("div",{className:"load-bar"},void 0,lt("div",{className:"bar"}),lt("div",{className:"bar"}),lt("div",{className:"bar"})))),lt("section",{className:"wrapper"},void 0,tt||(tt=lt("img",{className:"logo",src:"'../../img/color_tag_H.png",alt:"Countr Logo"})),lt(l.Translation,{},void 0,(n=>lt("div",{},void 0,lt("p",{},void 0,n("add_store")),lt("select",{value:t,onChange:this.handlerStoreSelect("storeSelected")},void 0,lt("option",{value:""},void 0,"---",n("store_dropdown_placeholder"),"---"),e.length&&e.map((e=>lt("option",{value:e._id},e._id,e.name)))),lt("button",{type:"button",onClick:this.register,disabled:0===Object.keys(t).length},void 0,n("register_terminal")))))))}}const dt=e=>lt(We.Consumer,{},void 0,(t=>o().createElement(ut,st({},e,{context:t}))));var pt;function ft(e,t,n,r){pt||(pt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:pt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}class ht extends r.Component{render(){return ft(dt,{history:this.props.history})}}const gt="logged__tools__HsDpV",mt="logged__username__2sF33",{remote:yt,shell:vt}=n(933),{Menu:St,MenuItem:bt}=yt;var wt,_t;function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ct(e,t,n,r){_t||(_t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:_t,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const $t=n(172),Ot=n(933),{app:Et,BrowserWindow:kt,Tray:Ft}=Ot.remote,Pt=Et.getVersion();let It,Tt;class Rt extends r.Component{constructor(e){super(e),this.handlerStoreSelect=e=>t=>{this.setState({[e]:t.target.value})},this.refreshSettings=()=>Je.getCountrSdk().then((async e=>{let t=JSON.parse(localStorage.getItem("device"));return t=await e.devices.readOne(t._id),localStorage.setItem("localSettings",JSON.stringify(t.settings))})).catch(console.log),this.logout=()=>{const{history:e}=this.props;localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_type"),localStorage.removeItem("user"),localStorage.removeItem("localSettings"),localStorage.removeItem("device"),It&&It.close(),Tt&&Tt.destroy(),Ot.remote.getCurrentWindow().webContents.isRunning=!1,Ot.remote.getCurrentWindow().show(),e.push("/")},this.toggleSettings=()=>{this.setState((e=>({showSettings:e.showSettings})))},this.setListeners=()=>{},this.state={showSettings:!1}}componentDidMount(){this.init()}async init(){await Je.getSocketServer(),this.setListeners();let e=JSON.parse(localStorage.getItem("localSettings")||{});const t=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token"),r=await Je.getCountrSdk(),o=(0,G.machineIdSync)({original:!0}),i=(await r.devices.readOne("search/type",{text:"desktop"})).filter((e=>e.uuid===o));i&&i.length&&i[0].settings&&(r.caller.devices.update(i[0]._id,{"info.desktop_version":Pt,"settings.local_ip":ot().address()}).then((()=>console.log(`#####DEVICE UPDATED - LOCAL IP - ${ot().address()}`))).catch((e=>console.log("#####ERROR UPDATING DEVICE VERSION",e))),i[0].settings.local_ip=ot().address(),e=JSON.stringify(i[0].settings));const{width:a,height:s}=Ot.remote.screen.getPrimaryDisplay().size;if(It=new kt({width:a,height:s,show:!0,animate:!1,resizable:!0,webPreferences:{devTools:!0,webSecurity:!1,nodeIntegration:!1,allowRunningInsecureContent:!0,enableRemoteModule:!0},center:!0,setAutoHideMenuBar:!0,simpleFullscreen:!0}),It.loadURL("http://localhost:3000"),It.webContents.on("crashed",console.log),$t&&It.openDevTools(),It.webContents.on("did-finish-load",(()=>{It.webContents.executeJavaScript(`localStorage.setItem("access_token", ${JSON.stringify(t)})`),It.webContents.executeJavaScript(`localStorage.setItem("refresh_token", ${JSON.stringify(n)})`),It.webContents.executeJavaScript('localStorage.setItem("CountrLite:RememberLogin", "true")'),It.webContents.executeJavaScript('localStorage.setItem("isDesktop", "true")'),It.webContents.executeJavaScript(`localStorage.setItem("DesktopVersion", ${JSON.stringify(Pt)})`);const r=localStorage.getItem("CountrWeb:Language");r&&It.webContents.executeJavaScript(`localStorage.setItem("CountrWeb:Language", ${JSON.stringify(r)})`);const o=`localStorage.setItem("CountrLite:LocalDesktop", ${JSON.stringify(e)});`;It.webContents.executeJavaScript(o)})),!$t){let e="./app/img/trayLogo.png";e=`${Et.getAppPath()}/app/img/trayLogo.png`,Tt=new Ft(e),Tt.setContextMenu(function(e,t,n){const r=new St;return r.append(new bt({label:"Open",click:()=>{this.openPos()}})),r.append(new bt({type:"separator"})),r.append(new bt({label:"Dashboard",click(){vt.openExternal("https://dashboard-new.countrhq.com")}})),r.append(new bt({type:"separator"})),r.append(new bt({label:"Refresh Settings",click:()=>{t().then((()=>n())).catch(console.log)}})),r.append(new bt({type:"separator"})),r.append(new bt({label:"Web Tools",click:()=>{e.toggleDevTools()}})),r.append(new bt({type:"separator"})),r.append(new bt({label:"Tools",click(){yt.getCurrentWindow().toggleDevTools()}})),window.addEventListener("contextmenu",(e=>{e.preventDefault(),r.popup({window:yt.getCurrentWindow()})}),!1),r}(It,this.refreshSettings,this.openPos))}It.setMenu(null),It.on("close",(()=>{Ot.remote.getCurrentWindow().show(),$t||Tt.destroy(),It=null}))}render(){const{showSettings:e}=this.state;return Ct("section",{className:"wrapper"},void 0,wt||(wt=Ct("img",{className:"logo",src:"'../../img/color_tag_H.png",alt:"Countr POS"})),Ct("div",{className:gt},void 0,Ct("div",{className:mt},void 0,this.props.context.merchant.username),Ct(l.Translation,{},void 0,(e=>Ct("div",{},void 0,Ct("button",{type:"button",onClick:this.openPos},void 0,e("reopen_pos")),Ct("button",{type:"button",onClick:this.logout},void 0,e("signing_out")))))))}}const Lt=e=>Ct(We.Consumer,{},void 0,(t=>o().createElement(Rt,xt({},e,{context:t}))));var At,Dt;function jt(e,t,n,r){At||(At="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:At,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}class Nt extends r.Component{render(){return jt(Lt,{history:this.props.history})}}function Mt(e,t,n,r){Dt||(Dt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Dt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Bt=(0,y.withRouter)((()=>Mt(V,{},void 0,Mt(y.Switch,{},void 0,Mt(y.Route,{exact:!0,path:"/",render:({history:e})=>Mt(Ze,{history:e})}),Mt(y.Route,{path:"/main",render:({history:e})=>Mt(ht,{history:e})}),Mt(y.Route,{path:"/logged",render:({history:e})=>Mt(Nt,{history:e})})))));var zt,Jt,Ut,Wt,qt;function Ht(e,t,n,r){qt||(qt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:qt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Vt=n(933).remote.app.getVersion(),Gt=localStorage.getItem("CountrWeb:Language");class Yt extends r.Component{constructor(...e){super(...e),this.state={lang:Gt},this.customAction=e=>{switch(e){case"close":f.remote.app.quit();break;case"min":f.remote.BrowserWindow.getFocusedWindow().minimize()}},this.changeLang=e=>{localStorage.setItem("CountrWeb:Language",e.target.value),this.setState({lang:e.target.value}),u().changeLanguage(e.target.value)}}componentDidMount(){const e=localStorage.getItem("CountrWeb:Language")||"en";this.setState({lang:e}),u().changeLanguage(e)}render(){const{store:e,history:t}=this.props;return Ht("div",{},void 0,Ht("div",{id:"title-bar"},void 0,Ht("div",{id:"title-bar-btns"},void 0,Ht("i",{onClick:()=>this.customAction("close"),className:"fa fa-times-circle close","aria-hidden":"true"},void 0,"×"),Ht("i",{onClick:()=>this.customAction("min"),className:"fa fa-minus-circle minimize","aria-hidden":"true"},void 0,"−"))),Ht(h.Provider,{store:e},void 0,Ht(U,{history:t},void 0,zt||(zt=Ht(Bt,{})))),Ht("select",{defaultValue:this.state.lang,className:"app_lang",onChange:this.changeLang},void 0,Jt||(Jt=Ht("option",{value:"en"},void 0,"EN")),Ut||(Ut=Ht("option",{value:"nl"},void 0,"NL"))),Wt||(Wt=Ht("p",{className:"app_version"},void 0,"Countr Desktop - v",Vt)))}}const Xt=require("redux"),Qt=require("redux-thunk");var Kt=n.n(Qt);const Zt=require("history");function en(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const nn=function(e){return function(t){return function(t){return function(n){if(n.type!==w)return t(n);var r=n.payload,o=r.method,i=r.args;e[o].apply(e,en(i))}}}};n(500);function rn(e){return(0,Xt.combineReducers)({router:W(e)})}const on=(0,Zt.createHashHistory)(),an=(rn(on),(0,Zt.createHashHistory)()),sn=rn(an),ln=nn(an),cn=(0,Xt.applyMiddleware)(Kt(),ln);const un={configureStore:function(e){return(0,Xt.createStore)(sn,e,cn)},history:an},{configureStore:dn}=un,{history:pn}=un;var fn,hn,gn;function mn(e,t,n,r){hn||(hn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:hn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}class yn extends o().Component{static getDerivedStateFromError(e){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){console.log(e,t)}render(){const{hasError:e}=this.state,{children:t}=this.props;return e?fn||(fn=mn("h1",{},void 0,"Sorry something went wrong, we will be looking to this error, you can find support using Intercom")):t}}function vn(e,t,n,r){gn||(gn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:gn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Sn=dn();(0,a.render)(vn(s.zj,{},void 0,vn(We.Provider,{value:Ue},void 0,vn(yn,{},void 0,vn(l.I18nextProvider,{i18n:p},void 0,vn(Yt,{store:Sn,history:pn}))))),document.getElementById("root"))},663:(e,t,n)=>{const r=n(126),o="857",i="A",a="NORMAL",s="ct",l="lt";e.exports=class{constructor(){this.paperSize=48}static connectPrinter(e,t=!1){return new Promise(((n,r)=>t?this.connectUSBPrinter(n,r):this.connectNetworkPrinter(e,n,r)))}static connectNetworkPrinter(e,t,n){const o=new r.Network(e),i=new r.Printer(o,{encoding:"ISO-8859-1"});o.open((e=>e?(console.log(e),n(e)):t(i))),o.device.setTimeout(1e3,(()=>{o.device.destroy();const t=new Error("Timeout connection - address: "+e);return console.log(t),n(t)})),o.device.once("connect",(()=>(console.log("socket connect to printer"),o.device.setTimeout(0),t(i))))}static connectUSBPrinter(e,t){const n=new r.USB,o=new r.Printer(n,{encoding:"ISO-8859-1"});n.open((n=>n?(console.log(n),t(n)):e(o)))}static getPaperSize(){return this.paperSize}static setPaperSize(e){this.paperSize=e}static chunkSubstr(e,t){const n=e.trim(),r=Math.ceil(n.length/t),o=new Array(r);for(let e=0,i=0;e<r;++e,i+=t)o[e]=n.substr(i,t).trim();return o}static lineFeed(e){e.size(1).font(i).style(a).text(" ")}static underlineFeed(e){const t=" ".repeat(this.paperSize);e.size(1).font(i).style("U").text(t)}static underlineBoldFeed(e){const t=" ".repeat(this.paperSize);e.size(1).font(i).style("U2").text(t)}static cutReceipt(e){e.size(1).text(" ").cut()}static finishReceipt(e){e.size(1).style(a).text(" ").cut().flush().close()}static printLine(e,t,n,r,i,a,s){e.align(n).font(s).style(a),r>1||i>1?e.size(r,i):e.size(r),e.text(t,o)}static printSpacesBetweenTexts(e,t,n,r,i){let a=this.paperSize*("B"===i?1.34:1),s=t.length+n.length+4;if(s<=a){a-=s;const c=" ".repeat(a<0?0:a+4);e.align(l).font(i).style(r).size(1).print(t,o).print(c,o).text(n,o)}else{const c=a-(n.length+4);s=c+n.length,a-=s;const u=" ".repeat(a<0?0:a);e.align(l).font(i).style(r).size(1).print(t.substr(0,c),o).print(u,o).text(n,o).text(t.substr(c),o)}}static printTable(e,t,n,r,s){const c=this.paperSize/t;n.map(((t,r)=>{let a=t;return t.length<c&&(a=this.completeWithSpaces(t,c-t.length)),r===n.length-1?e.align(l).font(i).style("BU").size(1).text(this.cropTableCell(a,c),o):e.align(l).font(i).style("BU").size(1).print(this.cropTableCell(a,c),o),""})),r.map((t=>(t.map(((t,r)=>{let s=t;return t.length<c&&(s=this.completeWithSpaces(t,c-t.length)),r===n.length-1?e.align(l).font(i).style(a).size(1).text(this.cropTableCell(s,c),o):e.align(l).font(i).style(a).size(1).print(this.cropTableCell(s,c),o),""})),""))),s.map(((t,r)=>{let a=t;return t.length<c&&(a=this.completeWithSpaces(t,c-t.length)),r===n.length-1?e.align(l).font(i).style("BU").size(1).text(this.cropTableCell(a,c),o):e.align(l).font(i).style("BU").size(1).print(this.cropTableCell(a,c),o),""}))}static printQRCode(e,t){e.align(s).qrimage(t,{type:"png",size:10},(function(e){this.cut(),this.close()}))}static completeWithSpaces(e,t){return`${e}${" ".repeat(t)}`}static cropTableCell(e,t){return e.length>t?e.substr(0,t):e}static getStyleAlign(e){if(e.style&&e.style.alignment){if("center"===e.style.alignment)return s;if("left"===e.style.alignment)return l;if("right"===e.style.alignment)return"rt"}return s}static getStyleSize(e){if(e.style&&e.style.fontSize){if("s"===e.style.fontSize)return{width:1,height:1};if("m"===e.style.fontSize)return{width:2,height:1};if("l"===e.style.fontSize)return{width:2,height:2}}return{width:1,height:1}}static getStyleStyle(e){return e.style&&e.style.fontWeight&&"B"===e.style.fontWeight?"B":a}static returnFormatedDate(e){const t=e||new Date;return`${new Date(t).toLocaleDateString()} - ${new Date(t).toLocaleTimeString()}`}static returnFieldFormatedDate(e,t){return`${e}: ${new Date(t).toLocaleDateString()} - ${new Date(t).toLocaleTimeString()}`}static returnItemName(e){const t=e.product?e.product:e,n=e.product?e.product.current_variant:e.current_variant;return n.default?t.name:`${t.name}/${n.name}`}static returnItemBasePrice(e){return e.price+(e.addons&&e.addons.length>0?e.addons.reduce(((e,t)=>e+t.price*t.amount),0):0)}static returnItemTotalPrice(e){return parseFloat(this.returnItemBasePrice(e)*e.amount).toFixed(2)}static revemoFromString(e,t,n){return e.indexOf(t)>=0?e.replace(t,n):e}}},172:(e,t,n)=>{"use strict";const r=n(933);if("string"==typeof r)throw new TypeError("Not running in an Electron environment!");const o=r.app||r.remote.app,i="ELECTRON_IS_DEV"in process.env,a=1===parseInt(1,10);e.exports=i?a:!o.isPackaged},413:(e,t,n)=>{"use strict";var r=t,o=n(293).Buffer,i=n(87);r.toBuffer=function(e,t,n){var r;if(n=~~n,this.isV4Format(e))r=t||new o(n+4),e.split(/\./g).map((function(e){r[n++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var i,a=e.split(":",8);for(i=0;i<a.length;i++){var s;this.isV4Format(a[i])&&(s=this.toBuffer(a[i]),a[i]=s.slice(0,2).toString("hex")),s&&++i<8&&a.splice(i,0,s.slice(2,4).toString("hex"))}if(""===a[0])for(;a.length<8;)a.unshift("0");else if(""===a[a.length-1])for(;a.length<8;)a.push("0");else if(a.length<8){for(i=0;i<a.length&&""!==a[i];i++);var l=[i,1];for(i=9-a.length;i>0;i--)l.push("0");a.splice.apply(a,l)}for(r=t||new o(n+16),i=0;i<a.length;i++){var c=parseInt(a[i],16);r[n++]=c>>8&255,r[n++]=255&c}}if(!r)throw Error("Invalid ip address: "+e);return r},r.toString=function(e,t,n){t=~~t;var r=[];if(4===(n=n||e.length-t)){for(var o=0;o<n;o++)r.push(e[t+o]);r=r.join(".")}else if(16===n){for(o=0;o<n;o+=2)r.push(e.readUInt16BE(t+o).toString(16));r=(r=(r=r.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return r};var a=/^(\d{1,3}\.){3,3}\d{1,3}$/,s=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function l(e){return e?e.toLowerCase():"ipv4"}r.isV4Format=function(e){return a.test(e)},r.isV6Format=function(e){return s.test(e)},r.fromPrefixLen=function(e,t){var n=4;"ipv6"===(t=e>32?"ipv6":l(t))&&(n=16);for(var i=new o(n),a=0,s=i.length;a<s;++a){var c=8;e<8&&(c=e),e-=c,i[a]=255&~(255>>c)}return r.toString(i)},r.mask=function(e,t){e=r.toBuffer(e),t=r.toBuffer(t);var n=new o(Math.max(e.length,t.length)),i=0;if(e.length===t.length)for(i=0;i<e.length;i++)n[i]=e[i]&t[i];else if(4===t.length)for(i=0;i<t.length;i++)n[i]=e[e.length-4+i]&t[i];else{for(i=0;i<n.length-6;i++)n[i]=0;for(n[10]=255,n[11]=255,i=0;i<e.length;i++)n[i+12]=e[i]&t[i+12];i+=12}for(;i<n.length;i++)n[i]=0;return r.toString(n)},r.cidr=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var o=r.fromPrefixLen(parseInt(t[1],10));return r.mask(n,o)},r.subnet=function(e,t){for(var n=r.toLong(r.mask(e,t)),o=r.toBuffer(t),i=0,a=0;a<o.length;a++)if(255===o[a])i+=8;else for(var s=255&o[a];s;)s=s<<1&255,i++;var l=Math.pow(2,32-i);return{networkAddress:r.fromLong(n),firstAddress:l<=2?r.fromLong(n):r.fromLong(n+1),lastAddress:l<=2?r.fromLong(n+l-1):r.fromLong(n+l-2),broadcastAddress:r.fromLong(n+l-1),subnetMask:t,subnetMaskLength:i,numHosts:l<=2?l:l-2,length:l,contains:function(e){return n===r.toLong(r.mask(e,t))}}},r.cidrSubnet=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var o=r.fromPrefixLen(parseInt(t[1],10));return r.subnet(n,o)},r.not=function(e){for(var t=r.toBuffer(e),n=0;n<t.length;n++)t[n]=255^t[n];return r.toString(t)},r.or=function(e,t){if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;++n)e[n]|=t[n];return r.toString(e)}var o=e,i=t;t.length>e.length&&(o=t,i=e);var a=o.length-i.length;for(n=a;n<o.length;++n)o[n]|=i[n-a];return r.toString(o)},r.isEqual=function(e,t){if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(4===t.length){var o=t;t=e,e=o}for(n=0;n<10;n++)if(0!==t[n])return!1;var i=t.readUInt16BE(10);if(0!==i&&65535!==i)return!1;for(n=0;n<4;n++)if(e[n]!==t[n+12])return!1;return!0},r.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.isPublic=function(e){return!r.isPrivate(e)},r.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.loopback=function(e){if("ipv4"!==(e=l(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},r.address=function(e,t){var n,o=i.networkInterfaces();if(t=l(t),e&&"private"!==e&&"public"!==e){var a=o[e].filter((function(e){return e.family.toLowerCase()===t}));if(0===a.length)return;return a[0].address}return(n=Object.keys(o).map((function(n){var i=o[n].filter((function(n){return n.family=n.family.toLowerCase(),n.family===t&&!r.isLoopback(n.address)&&(!e||("public"===e?r.isPrivate(n.address):r.isPublic(n.address)))}));return i.length?i[0].address:void 0})).filter(Boolean)).length?n[0]:r.loopback(t)},r.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},r.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}},559:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Array]",s="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",d="[object Map]",p="[object Number]",f="[object Object]",h="[object Promise]",g="[object RegExp]",m="[object Set]",y="[object String]",v="[object Symbol]",S="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",_=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[i]=C[a]=C[b]=C[s]=C[w]=C[l]=C[c]=C[u]=C[d]=C[p]=C[f]=C[g]=C[m]=C[y]=C[S]=!1;var $="object"==typeof global&&global&&global.Object===Object&&global,O="object"==typeof self&&self&&self.Object===Object&&self,E=$||O||Function("return this")(),k=t&&!t.nodeType&&t,F=k&&e&&!e.nodeType&&e,P=F&&F.exports===k&&$.process,I=function(){try{return P&&P.binding("util")}catch(e){}}(),T=I&&I.isTypedArray;function R(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function L(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function A(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function D(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var j,N,M,B=Array.prototype,z=Function.prototype,J=Object.prototype,U=E["__core-js_shared__"],W=(j=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",q=z.toString,H=J.hasOwnProperty,V=J.toString,G=RegExp("^"+q.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=E.Symbol,X=E.Uint8Array,Q=J.propertyIsEnumerable,K=B.splice,Z=(N=Object.keys,M=Object,function(e){return N(M(e))}),ee=$e(E,"DataView"),te=$e(E,"Map"),ne=$e(E,"Promise"),re=$e(E,"Set"),oe=$e(E,"WeakMap"),ie=$e(Object,"create"),ae=ke(ee),se=ke(te),le=ke(ne),ce=ke(re),ue=ke(oe),de=Y?Y.prototype:void 0,pe=de?de.valueOf:void 0;function fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function he(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ge(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function me(e){var t=-1,n=e?e.length:0;for(this.__data__=new ge;++t<n;)this.add(e[t])}function ye(e){this.__data__=new he(e)}function ve(e,t){var n=Pe(e)||function(e){return function(e){return Ae(e)&&Ie(e)}(e)&&H.call(e,"callee")&&(!Q.call(e,"callee")||V.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!H.call(e,a)||o&&("length"==a||Ee(a,r))||n.push(a);return n}function Se(e,t){for(var n=e.length;n--;)if(Fe(e[n][0],t))return n;return-1}function be(e,t,n,r,o){return e===t||(null==e||null==t||!Le(e)&&!Ae(t)?e!=e&&t!=t:function(e,t,n,r,o,u){var h=Pe(e),S=Pe(t),_=a,x=a;h||(_=(_=Oe(e))==i?f:_);S||(x=(x=Oe(t))==i?f:x);var C=_==f&&!L(e),$=x==f&&!L(t),O=_==x;if(O&&!C)return u||(u=new ye),h||De(e)?xe(e,t,n,r,o,u):function(e,t,n,r,o,i,a){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!r(new X(e),new X(t)));case s:case l:case p:return Fe(+e,+t);case c:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case d:var u=A;case m:var f=2&i;if(u||(u=D),e.size!=t.size&&!f)return!1;var h=a.get(e);if(h)return h==t;i|=1,a.set(e,t);var S=xe(u(e),u(t),r,o,i,a);return a.delete(e),S;case v:if(pe)return pe.call(e)==pe.call(t)}return!1}(e,t,_,n,r,o,u);if(!(2&o)){var E=C&&H.call(e,"__wrapped__"),k=$&&H.call(t,"__wrapped__");if(E||k){var F=E?e.value():e,P=k?t.value():t;return u||(u=new ye),n(F,P,r,o,u)}}if(!O)return!1;return u||(u=new ye),function(e,t,n,r,o,i){var a=2&o,s=je(e),l=s.length,c=je(t).length;if(l!=c&&!a)return!1;var u=l;for(;u--;){var d=s[u];if(!(a?d in t:H.call(t,d)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var f=!0;i.set(e,t),i.set(t,e);var h=a;for(;++u<l;){var g=e[d=s[u]],m=t[d];if(r)var y=a?r(m,g,d,t,e,i):r(g,m,d,e,t,i);if(!(void 0===y?g===m||n(g,m,r,o,i):y)){f=!1;break}h||(h="constructor"==d)}if(f&&!h){var v=e.constructor,S=t.constructor;v==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof S&&S instanceof S||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,n,r,o,u)}(e,t,be,n,r,o))}function we(e){return!(!Le(e)||function(e){return!!W&&W in e}(e))&&(Te(e)||L(e)?G:_).test(ke(e))}function _e(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||J,t!==r)return Z(e);var t,n,r,o=[];for(var i in Object(e))H.call(e,i)&&"constructor"!=i&&o.push(i);return o}function xe(e,t,n,r,o,i){var a=2&o,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var u=-1,d=!0,p=1&o?new me:void 0;for(i.set(e,t),i.set(t,e);++u<s;){var f=e[u],h=t[u];if(r)var g=a?r(h,f,u,t,e,i):r(f,h,u,e,t,i);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!R(t,(function(e,t){if(!p.has(t)&&(f===e||n(f,e,r,o,i)))return p.add(t)}))){d=!1;break}}else if(f!==h&&!n(f,h,r,o,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function Ce(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function $e(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return we(n)?n:void 0}fe.prototype.clear=function(){this.__data__=ie?ie(null):{}},fe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},fe.prototype.get=function(e){var t=this.__data__;if(ie){var n=t[e];return n===r?void 0:n}return H.call(t,e)?t[e]:void 0},fe.prototype.has=function(e){var t=this.__data__;return ie?void 0!==t[e]:H.call(t,e)},fe.prototype.set=function(e,t){return this.__data__[e]=ie&&void 0===t?r:t,this},he.prototype.clear=function(){this.__data__=[]},he.prototype.delete=function(e){var t=this.__data__,n=Se(t,e);return!(n<0)&&(n==t.length-1?t.pop():K.call(t,n,1),!0)},he.prototype.get=function(e){var t=this.__data__,n=Se(t,e);return n<0?void 0:t[n][1]},he.prototype.has=function(e){return Se(this.__data__,e)>-1},he.prototype.set=function(e,t){var n=this.__data__,r=Se(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ge.prototype.clear=function(){this.__data__={hash:new fe,map:new(te||he),string:new fe}},ge.prototype.delete=function(e){return Ce(this,e).delete(e)},ge.prototype.get=function(e){return Ce(this,e).get(e)},ge.prototype.has=function(e){return Ce(this,e).has(e)},ge.prototype.set=function(e,t){return Ce(this,e).set(e,t),this},me.prototype.add=me.prototype.push=function(e){return this.__data__.set(e,r),this},me.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.clear=function(){this.__data__=new he},ye.prototype.delete=function(e){return this.__data__.delete(e)},ye.prototype.get=function(e){return this.__data__.get(e)},ye.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.set=function(e,t){var n=this.__data__;if(n instanceof he){var r=n.__data__;if(!te||r.length<199)return r.push([e,t]),this;n=this.__data__=new ge(r)}return n.set(e,t),this};var Oe=function(e){return V.call(e)};function Ee(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||x.test(e))&&e>-1&&e%1==0&&e<t}function ke(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fe(e,t){return e===t||e!=e&&t!=t}(ee&&Oe(new ee(new ArrayBuffer(1)))!=w||te&&Oe(new te)!=d||ne&&Oe(ne.resolve())!=h||re&&Oe(new re)!=m||oe&&Oe(new oe)!=S)&&(Oe=function(e){var t=V.call(e),n=t==f?e.constructor:void 0,r=n?ke(n):void 0;if(r)switch(r){case ae:return w;case se:return d;case le:return h;case ce:return m;case ue:return S}return t});var Pe=Array.isArray;function Ie(e){return null!=e&&Re(e.length)&&!Te(e)}function Te(e){var t=Le(e)?V.call(e):"";return t==u||"[object GeneratorFunction]"==t}function Re(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Le(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ae(e){return!!e&&"object"==typeof e}var De=T?function(e){return function(t){return e(t)}}(T):function(e){return Ae(e)&&Re(e.length)&&!!C[V.call(e)]};function je(e){return Ie(e)?ve(e):_e(e)}e.exports=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?be(e,t,n):!!r}},703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},209:(e,t,n)=>{"use strict";var r,o=(r=n(297))&&"object"==typeof r&&"default"in r?r.default:r;function i(e){return i.warnAboutHMRDisabled&&(i.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),o.Children.only(e.children)}i.warnAboutHMRDisabled=!1;var a=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return o.createElement(i,null,o.createElement(e,t))}}:function(e){return e}};a.shouldWrapWithAppContainer=!1;t.zj=i},500:function(e,t){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function r(e,t,n){r.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function i(e,t){i.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function a(e,t,n){a.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function l(e){var t=void 0===e?"undefined":F(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,n,u,d,p,f){f=f||[];var h=(d=d||[]).slice(0);if(void 0!==p){if(u){if("function"==typeof u&&u(h,p))return;if("object"===(void 0===u?"undefined":F(u))){if(u.prefilter&&u.prefilter(h,p))return;if(u.normalize){var g=u.normalize(h,p,e,t);g&&(e=g[0],t=g[1])}}}h.push(p)}"regexp"===l(e)&&"regexp"===l(t)&&(e=e.toString(),t=t.toString());var m=void 0===e?"undefined":F(e),y=void 0===t?"undefined":F(t),v="undefined"!==m||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(p),S="undefined"!==y||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(p);if(!v&&S)n(new o(h,t));else if(!S&&v)n(new i(h,e));else if(l(e)!==l(t))n(new r(h,e,t));else if("date"===l(e)&&e-t!=0)n(new r(h,e,t));else if("object"===m&&null!==e&&null!==t)if(f.filter((function(t){return t.lhs===e})).length)e!==t&&n(new r(h,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){var b;for(e.length,b=0;b<e.length;b++)b>=t.length?n(new a(h,b,new i(void 0,e[b]))):c(e[b],t[b],n,u,h,b,f);for(;b<t.length;)n(new a(h,b,new o(void 0,t[b++])))}else{var w=Object.keys(e),_=Object.keys(t);w.forEach((function(r,o){var i=_.indexOf(r);i>=0?(c(e[r],t[r],n,u,h,r,f),_=s(_,i)):c(e[r],void 0,n,u,h,r,f)})),_.forEach((function(e){c(void 0,t[e],n,u,h,e,f)}))}f.length=f.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new r(h,e,t)))}function u(e,t,n,r){return r=r||[],c(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function d(e,t,n){if(n.path&&n.path.length){var r,o=e[t],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":d(o[n.path[r]],n.index,n.item);break;case"D":delete o[n.path[r]];break;case"E":case"N":o[n.path[r]]=n.rhs}}else switch(n.kind){case"A":d(e[t],n.index,n.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function p(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,o=-1,i=n.path?n.path.length-1:0;++o<i;)void 0===r[n.path[o]]&&(r[n.path[o]]="number"==typeof n.path[o]?[]:{}),r=r[n.path[o]];switch(n.kind){case"A":d(n.path?r[n.path[o]]:r,n.index,n.item);break;case"D":delete r[n.path[o]];break;case"E":case"N":r[n.path[o]]=n.rhs}}}function f(e,t,n){if(n.path&&n.path.length){var r,o=e[t],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":f(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}else switch(n.kind){case"A":f(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=s(e,t)}return e}function h(e,t,n){if(e&&t&&n&&n.kind){var r,o,i=e;for(o=n.path.length-1,r=0;r<o;r++)void 0===i[n.path[r]]&&(i[n.path[r]]={}),i=i[n.path[r]];switch(n.kind){case"A":f(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}}function g(e,t,n){e&&t&&c(e,t,(function(r){n&&!n(e,t,r)||p(e,t,r)}))}function m(e){return"color: "+T[e].color+"; font-weight: bold"}function y(e){var t=e.kind,n=e.path,r=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"→",o];case"N":return[n.join("."),o];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+i+"]",a];default:return[]}}function v(e,t,n,r){var o=u(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}o?o.forEach((function(e){var t=e.kind,r=y(e);n.log.apply(n,["%c "+T[t].text,m(t)].concat(P(r)))})):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}function S(e,t,n,r){switch(void 0===e?"undefined":F(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,P(n)):e[r];case"function":return e(t);default:return e}}function b(e){var t=e.timestamp,n=e.duration;return function(e,r,o){var i=["action"];return i.push("%c"+String(e.type)),t&&i.push("%c@ "+r),n&&i.push("%c(in "+o.toFixed(2)+" ms)"),i.join(" ")}}function w(e,t){var n=t.logger,r=t.actionTransformer,o=t.titleFormatter,i=void 0===o?b(t):o,a=t.collapsed,s=t.colors,l=t.level,c=t.diff,u=void 0===t.titleFormatter;e.forEach((function(o,d){var p=o.started,f=o.startedTime,h=o.action,g=o.prevState,m=o.error,y=o.took,b=o.nextState,w=e[d+1];w&&(b=w.prevState,y=w.started-p);var _=r(h),x="function"==typeof a?a((function(){return b}),h,o):a,C=E(f),$=s.title?"color: "+s.title(_)+";":"",O=["color: gray; font-weight: lighter;"];O.push($),t.timestamp&&O.push("color: gray; font-weight: lighter;"),t.duration&&O.push("color: gray; font-weight: lighter;");var k=i(_,C,y);try{x?s.title&&u?n.groupCollapsed.apply(n,["%c "+k].concat(O)):n.groupCollapsed(k):s.title&&u?n.group.apply(n,["%c "+k].concat(O)):n.group(k)}catch(e){n.log(k)}var F=S(l,_,[g],"prevState"),P=S(l,_,[_],"action"),I=S(l,_,[m,g],"error"),T=S(l,_,[b],"nextState");if(F)if(s.prevState){var R="color: "+s.prevState(g)+"; font-weight: bold";n[F]("%c prev state",R,g)}else n[F]("prev state",g);if(P)if(s.action){var L="color: "+s.action(_)+"; font-weight: bold";n[P]("%c action    ",L,_)}else n[P]("action    ",_);if(m&&I)if(s.error){var A="color: "+s.error(m,g)+"; font-weight: bold;";n[I]("%c error     ",A,m)}else n[I]("error     ",m);if(T)if(s.nextState){var D="color: "+s.nextState(b)+"; font-weight: bold";n[T]("%c next state",D,b)}else n[T]("next state",b);c&&v(g,b,n,x);try{n.groupEnd()}catch(e){n.log("—— log end ——")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},R,e),n=t.logger,r=t.stateTransformer,o=t.errorTransformer,i=t.predicate,a=t.logErrors,s=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof i&&!i(n,c))return e(c);var u={};l.push(u),u.started=k.now(),u.startedTime=new Date,u.prevState=r(n()),u.action=c;var d=void 0;if(a)try{d=e(c)}catch(e){u.error=o(e)}else d=e(c);u.took=k.now()-u.started,u.nextState=r(n());var p=t.diff&&"function"==typeof s?s(n,c):t.diff;if(w(l,Object.assign({},t,{diff:p})),l.length=0,u.error)throw u.error;return d}}}}var x,C,$=function(e,t){return new Array(t+1).join(e)},O=function(e,t){return $("0",t-e.toString().length)+e},E=function(e){return O(e.getHours(),2)+":"+O(e.getMinutes(),2)+":"+O(e.getSeconds(),2)+"."+O(e.getMilliseconds(),3)},k="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},I=[];x="object"===("undefined"==typeof global?"undefined":F(global))&&global?global:"undefined"!=typeof window?window:{},(C=x.DeepDiff)&&I.push((function(){void 0!==C&&x.DeepDiff===u&&(x.DeepDiff=C,C=void 0)})),t(r,n),t(o,n),t(i,n),t(a,n),Object.defineProperties(u,{diff:{value:u,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:g,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:h,enumerable:!0},isConflict:{value:function(){return void 0!==C},enumerable:!0},noConflict:{value:function(){return I&&(I.forEach((function(e){e()})),I=null),u},enumerable:!0}});var T={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},R={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=R,e.createLogger=_,e.logger=L,e.default=L,Object.defineProperty(e,"__esModule",{value:!0})}(t)},293:e=>{"use strict";e.exports=require("buffer")},334:e=>{"use strict";e.exports=require("dotenv")},933:e=>{"use strict";e.exports=require("electron")},126:e=>{"use strict";e.exports=require("escpos")},605:e=>{"use strict";e.exports=require("http")},87:e=>{"use strict";e.exports=require("os")},297:e=>{"use strict";e.exports=require("react")},439:e=>{"use strict";e.exports=require("ws")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r=n(639);module.exports=r})();
//# sourceMappingURL=renderer.prod.js.map